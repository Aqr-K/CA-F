import{a as B,r as b,S as M,v as R,b as W,e as l,o as r,h as k,i as e,w as t,F as I,j as T,c as v,Y as E,Z as U,g as y,a8 as Y,a9 as S,$ as j,E as L,L as w,D as q,C as D,aa as G,K as h,M as K,au as O,B as $,T as x,a0 as Z,a1 as A,f as H,a2 as J,t as Q,a3 as N,a4 as F,m as X,_ as ee}from"./index-DI_hYhUU.js";import{d as z}from"./vuedraggable.umd-CKWiebqN.js";const te={key:0},se={class:"flex items-center flex-left"},le={class:"btn-settings"},ae=B({__name:"GlobalSettings",setup(P){const g=b(!0),_=M.useToast(),o=b([{title:"常用设置",items:[{key:"start_delay",label:"延时启动"},{key:"backup_dir",label:"备份文件夹"},{key:"http_proxy",label:"http代理"},{key:"switch_group",switches:[{key:"debug_mode",label:"调试模式"}]}]},{title:"登录设置",items:[{key:"username",label:"用户名"},{key:"password",label:"密码"}]}]),u=b({start_delay:0,debug_mode:!1,config_file_watcher:!1,backup_dir:"",username:"",password:"",http_proxy:""});async function f(){try{const m=await h.get("/system/settings/global_settings");n(m),g.value=!1}catch(m){console.error("Error fetching sync config:",m)}}async function d(){try{let m={settings:u.value,name:"global_settings"};const s=await h.post("/system/save_settings",m,{headers:{"Content-Type":"application/json"}});s.success?_.success(s.message):_.error(s.message)}catch(m){console.error("Error fetching sync config:",m)}}function n(m){u.value=m}return R(f),(m,s)=>{const i=W("VPathInput");return l(g)?L("",!0):(r(),k("div",te,[e(G,null,{default:t(()=>[(r(!0),k(I,null,T(l(o),c=>(r(),v(w,{class:"px-5 mb-5",title:c.title},{default:t(()=>[e(E,null,{default:t(()=>[(r(!0),k(I,null,T(c.items,a=>(r(),v(U,{cols:"12",class:"pb-10 ml-2"},{default:t(()=>[y("div",se,["options"in a?(r(),v(Y,{key:0,id:a.label,label:a.label,items:a.options,modelValue:l(u)[a.key],"onUpdate:modelValue":p=>l(u)[a.key]=p},null,8,["id","label","items","modelValue","onUpdate:modelValue"])):a.key==="backup_dir"?(r(),v(i,{key:1,label:a.label,modelValue:l(u)[a.key],"onUpdate:modelValue":p=>l(u)[a.key]=p},null,8,["label","modelValue","onUpdate:modelValue"])):typeof l(u)[a.key]=="string"||typeof l(u)[a.key]=="number"?(r(),v(S,{key:2,id:a.label,label:a.label,modelValue:l(u)[a.key],"onUpdate:modelValue":p=>l(u)[a.key]=p,type:a.key==="password"?"password":"text"},null,8,["id","label","modelValue","onUpdate:modelValue","type"])):a.key=="switch_group"?(r(),v(E,{key:3},{default:t(()=>[(r(!0),k(I,null,T(a.switches,(p,V)=>(r(),v(U,{cols:"12",sm:"6",md:"4",lg:"4"},{default:t(()=>[e(j,{label:p.label,modelValue:l(u)[p.key],"onUpdate:modelValue":C=>l(u)[p.key]=C},null,8,["label","modelValue","onUpdate:modelValue"])]),_:2},1024))),256))]),_:2},1024)):L("",!0)])]),_:2},1024))),256))]),_:2},1024)]),_:2},1032,["title"]))),256)),y("div",le,[e(q,{onClick:d},{default:t(()=>s[0]||(s[0]=[D("保存")])),_:1})])]),_:1})]))}}}),ne={key:0},oe={class:"btn-settings"},ie=B({__name:"Notification",setup(P){const g=M.useToast(),_=b(!0),o=b({title:"通知工具",items:[{key:"bot_token",label:"Bot Token",hint:"Telegram机器人token，格式：789598:EGV-KOI56ghOkP-adx57W2v1u598ew1"},{key:"chat_id",label:"Chat ID",hint:"接受消息通知的用户、群组或频道Chat ID"},{key:"user_id",label:"用户白名单",hint:"可使用Telegram机器人的用户ID清单，多个用户用,分隔，不填写则所有用户都能使用"},{key:"admin_id",label:"管理员白名单",hint:"可使用管理菜单及命令的用户ID列表，多个ID使用,分隔"}]}),u=b({title:"推送设置",items:[{key:"symlink_observer",label:"监控状态"},{key:"observer_enabled",label:"监控事件"},{key:"cloud_wathcer",label:"转存监控"},{key:"sync_task",label:"同步完成"},{key:"backup_task",label:"备份完成"},{key:"cloud_status",label:"掉盘通知"},{key:"filetrans_enbaled",label:"刮削完成"}]}),f=b({switch:!1,bot_token:"",chat_id:"",user_id:"",admin_id:"",symlink_watcher:!1,cloud_wathcer:!1,sync_task:!1,backup_task:!1,cloud_status:!1,filetrans_task:!1});async function d(){try{const s=await h.get("/system/settings/notify_config");m(s.telegram),_.value=!1}catch(s){console.error("Error fetching sync config:",s)}}async function n(){try{let s={settings:{telegram:f.value},name:"notify_config"};const i=await h.post("/system/save_settings",s);i.success?g.success(i.message):g.error(i.message)}catch(s){console.error("Error fetching sync config:",s)}}function m(s){f.value=s}return R(d),(s,i)=>l(_)?L("",!0):(r(),k("div",ne,[e(G,null,{default:t(()=>[e(E,null,{default:t(()=>[e(U,{cols:"12"},{default:t(()=>[e(w,{title:l(o).title},{default:t(()=>[e(j,{label:"启用通知",modelValue:l(f).switch,"onUpdate:modelValue":i[0]||(i[0]=c=>l(f).switch=c),class:"ml-3"},null,8,["modelValue"]),e(E,{class:"pb-5 px-3"},{default:t(()=>[(r(!0),k(I,null,T(l(o).items,c=>(r(),v(U,{cols:"12",md:"6",class:"mb-5"},{default:t(()=>[e(S,{id:c.label,label:c.label,modelValue:l(f)[c.key],"onUpdate:modelValue":a=>l(f)[c.key]=a,hint:c.hint,"persistent-hint":""},null,8,["id","label","modelValue","onUpdate:modelValue","hint"])]),_:2},1024))),256))]),_:1})]),_:1},8,["title"])]),_:1}),e(U,{cols:"12"},{default:t(()=>[e(w,{title:l(u).title},{default:t(()=>[e(E,{class:"pb-5"},{default:t(()=>[(r(!0),k(I,null,T(l(u).items,c=>(r(),v(U,{cols:"12",sm:"4",md:"3",lg:"2",class:"ml-5"},{default:t(()=>[e(j,{label:c.label,modelValue:l(f)[c.key],"onUpdate:modelValue":a=>l(f)[c.key]=a},null,8,["label","modelValue","onUpdate:modelValue"])]),_:2},1024))),256))]),_:1})]),_:1},8,["title"])]),_:1})]),_:1}),y("div",oe,[e(q,{onClick:n},{default:t(()=>i[1]||(i[1]=[D("保存")])),_:1})])]),_:1})]))}}),ue={key:0},ce={class:"absolute top-0 right-3"},de={class:"btn-settings"},re=B({__name:"Settings115",setup(P){const g=M.useToast(),_=b(!0),o=b([{name:"",cookies:"",status:!0}]);function u(){o.value.push({name:"",cookies:"",status:!0})}function f(s){o.value.splice(s,1)}async function d(){try{const s=await h.get("/system/settings/115_settings");m(s),_.value=!1}catch(s){console.error("Error fetching sync config:",s)}}async function n(){try{let s={settings:o.value,name:"115_settings"};const i=await h.post("/system/save_settings",s);i.success?g.success(i.message):g.error(i.message)}catch(s){console.error("Error fetching sync config:",s)}}function m(s){o.value=s}return R(d),(s,i)=>{const c=W("IconBtn");return l(_)?L("",!0):(r(),k("div",ue,[e(w,{title:"115设置",subtitle:"用于115的目录树同步,也可与cd2的115ck保持一致,程序可以自动检测ck是否失效"},{default:t(()=>[e(K,null,{default:t(()=>[e(l(z),{list:l(o),handle:".cursor-move",delay:"100","item-key":"id",tag:"div","component-data":{class:"grid gap-3 grid-directory"}},{item:t(({element:a,index:p})=>[e(w,{color:"card"},{default:t(()=>[e(O,{class:"py-3"},{default:t(()=>[y("span",ce,[e(c,{onClick:u},{default:t(()=>[e($,{icon:"mdi-plus"})]),_:1}),e(c,{onClick:V=>f(p)},{default:t(()=>[e($,{icon:"mdi-minus"})]),_:2},1032,["onClick"]),e(c,null,{default:t(()=>[e($,{class:"cursor-move",icon:"mdi-drag"})]),_:1})])]),_:2},1024),e(x,{class:"mb-5"},{default:t(()=>[e(S,{label:"名称",modelValue:a.name,"onUpdate:modelValue":V=>a.name=V,hint:"自定义该配置的名称,用于识别不同的账户,该名称不可重复","persistent-hint":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(x,{class:"my-5"},{default:t(()=>[e(S,{label:"Cookies",modelValue:a.cookies,"onUpdate:modelValue":V=>a.cookies=V,hint:"115账户的cookies,推荐抓取小程序的cookies","persistent-hint":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(x,null,{default:t(()=>[e(j,{modelValue:a.status,"onUpdate:modelValue":V=>a.status=V,label:"风控检测",hint:"判断ck对应的账号是否发生风控并自动解除验证风控","persistent-hint":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)]),_:1},8,["list"]),y("div",de,[e(q,{onClick:n},{default:t(()=>i[0]||(i[0]=[D("保存")])),_:1})])]),_:1})]),_:1})]))}}}),_e={key:0},fe={class:"absolute top-0 right-3"},me={class:"btn-settings"},pe=B({__name:"CloudStatus",setup(P){const g=M.useToast(),_=b(!0),o=b([{name:"",sign_file:"",sign_file_url:""}]);function u(){o.value.push({name:"",sign_file:"",sign_file_url:""})}function f(s){o.value.splice(s,1)}async function d(){try{const s=await h.get("/system/settings/cloud_status");m(s),_.value=!1}catch(s){console.error("Error fetching sync config:",s)}}async function n(){try{let s={settings:o.value,name:"cloud_status"};const i=await h.post("/system/save_settings",s);i.success?g.success(i.message):g.error(i.message)}catch(s){console.error("Error fetching sync config:",s)}}function m(s){o.value=s}return R(d),(s,i)=>{const c=W("IconBtn"),a=W("VPathInput");return l(_)?L("",!0):(r(),k("div",_e,[e(w,{title:"掉盘检测",subtitle:"通过判断指定的文件是否可以下载判断是否发生掉盘/ck失效"},{default:t(()=>[e(K,null,{default:t(()=>[e(l(z),{list:l(o),handle:".cursor-move",delay:"100","item-key":"id",tag:"div","component-data":{class:"grid gap-3 grid-directory"}},{item:t(({element:p,index:V})=>[e(w,{color:"card"},{default:t(()=>[e(O,{class:"py-3"},{default:t(()=>[y("span",fe,[e(c,{onClick:u},{default:t(()=>[e($,{icon:"mdi-plus"})]),_:1}),e(c,{onClick:C=>f(V)},{default:t(()=>[e($,{icon:"mdi-minus"})]),_:2},1032,["onClick"]),e(c,null,{default:t(()=>[e($,{class:"cursor-move",icon:"mdi-drag"})]),_:1})])]),_:2},1024),e(x,null,{default:t(()=>[e(S,{label:"名称",modelValue:p.name,"onUpdate:modelValue":C=>p.name=C,hint:"自定义该配置的名称,用于识别不同的网盘账户,该名称不可重复","persistent-hint":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(x,{class:"mb-5"},{default:t(()=>[e(a,{label:"文件路径",modelValue:p.sign_file,"onUpdate:modelValue":C=>p.sign_file=C,hint:"掉盘检测的文件路径",fileRequired:!0},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(x,{class:"mb-3"},{default:t(()=>[e(S,{label:"文件链接",modelValue:p.sign_file_url,"onUpdate:modelValue":C=>p.sign_file_url=C,hint:"掉盘检测的文件在网盘中的下载链接","persistent-hint":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)]),_:1},8,["list"]),y("div",me,[e(q,{onClick:n},{default:t(()=>i[0]||(i[0]=[D("保存")])),_:1})])]),_:1})]),_:1})]))}}}),ge={key:0},ye={class:"btn-settings"},be=B({__name:"CloudMountWatcher",setup(P){const g=M.useToast(),_=b(!0),o=b({switch:!1,cloud_dir:""});async function u(){try{const d=await h.get("/system/settings/cloud_mount_watcher");o.value=d,_.value=!1}catch(d){console.error("Error fetching sync config:",d)}}async function f(){try{let d={settings:o.value,name:"cloud_mount_watcher"};const n=await h.post("/system/save_settings",d);n.success?g.success(n.message):g.error(n.message)}catch(d){console.error("Error fetching sync config:",d)}}return R(u),(d,n)=>{const m=W("VPathInput");return l(_)?L("",!0):(r(),k("div",ge,[e(E,null,{default:t(()=>[e(U,{cols:"12",md:"4"},{default:t(()=>[e(w,{title:"挂载监测"},{default:t(()=>[e(x,{class:"mb-5"},{default:t(()=>[e(j,{modelValue:l(o).switch,"onUpdate:modelValue":n[0]||(n[0]=s=>l(o).switch=s),label:"启用"},null,8,["modelValue"]),e(m,{label:"文件路径",modelValue:l(o).cloud_dir,"onUpdate:modelValue":n[1]||(n[1]=s=>l(o).cloud_dir=s),hint:"cd2挂载点路径"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),y("div",ye,[e(q,{onClick:f},{default:t(()=>n[2]||(n[2]=[D("保存")])),_:1})])]))}}}),ke=B({__name:"settings",setup(P){const g=H(),_=b(g.query.tab),o=[{tab:"global_settings",icon:"mdi-cog",title:"全局设置"},{tab:"notification",icon:"mdi-bell",title:"通知"},{tab:"115_settings",icon:"mdi-cookie",title:"115设置"},{tab:"cloud_status",icon:"mdi-eye",title:"掉盘检测"},{tab:"cloud_mount_watcher",icon:"mdi-eye",title:"挂载监测"}];function u(f){X.push("/settings?tab="+f)}return(f,d)=>(r(),k("div",null,[e(Z,{modelValue:_.value,"onUpdate:modelValue":d[0]||(d[0]=n=>_.value=n),"show-arrows":"",class:"v-tabs-pill"},{default:t(()=>[(r(),k(I,null,T(o,n=>e(J,{key:n.icon,value:n.tab,"selected-class":"v-slide-group-item--active v-tab--selected",onClick:m=>u(n.tab)},{default:t(()=>[y("div",null,[e($,{size:"20",start:"",icon:n.icon},null,8,["icon"]),D(" "+Q(n.title),1)])]),_:2},1032,["value","onClick"])),64))]),_:1},8,["modelValue"]),e(A,{modelValue:_.value,"onUpdate:modelValue":d[1]||(d[1]=n=>_.value=n),class:"mt-5 disable-tab-transition",touch:!1},{default:t(()=>[e(N,{value:"global_settings"},{default:t(()=>[e(F,{name:"fade-slide",appear:""},{default:t(()=>[y("div",null,[e(ae)])]),_:1})]),_:1}),e(N,{value:"notification"},{default:t(()=>[e(F,{name:"fade-slide",appear:""},{default:t(()=>[y("div",null,[e(ie)])]),_:1})]),_:1}),e(N,{value:"115_settings"},{default:t(()=>[e(F,{name:"fade-slide",appear:""},{default:t(()=>[y("div",null,[e(re)])]),_:1})]),_:1}),e(N,{value:"cloud_status"},{default:t(()=>[e(F,{name:"fade-slide",appear:""},{default:t(()=>[y("div",null,[e(pe)])]),_:1})]),_:1}),e(N,{value:"cloud_mount_watcher"},{default:t(()=>[e(F,{name:"fade-slide",appear:""},{default:t(()=>[y("div",null,[e(be)])]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}}),ve=ee(ke,[["__scopeId","data-v-6eefe078"]]);export{ve as default};
