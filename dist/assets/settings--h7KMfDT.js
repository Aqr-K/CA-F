import{a as T,r as m,S as N,v as F,b as D,e as o,o as y,h,i as e,w as t,L as k,Y as U,Z as b,g as f,a9 as v,$ as P,D as W,C as E,aa as G,E as j,K as V,F as M,j as R,c as q,M as K,au as O,B as $,T as x,a0 as Y,a1 as Z,f as A,a2 as H,t as J,a3 as B,a4 as L,m as Q,_ as X}from"./index-CtEqwN3J.js";import{d as z}from"./vuedraggable.umd-34F0tv5_.js";const ee={key:0},te={class:"flex items-center flex-left"},se={class:"btn-settings"},le=T({__name:"GlobalSettings",setup(S){const _=m(!0),d=N.useToast(),l=m({start_delay:0,debug_mode:!1,config_file_watcher:!1,backup_dir:"",username:"",password:"",http_proxy:""});async function p(){try{const a=await V.get("/system/settings/global_settings");u(a),_.value=!1}catch(a){console.error("Error fetching sync config:",a)}}async function c(){try{let a={settings:l.value,name:"global_settings"};const i=await V.post("/system/save_settings",a,{headers:{"Content-Type":"application/json"}});i.success?d.success(i.message):d.error(i.message)}catch(a){console.error("Error fetching sync config:",a)}}function u(a){l.value=a}return F(p),(a,i)=>{const s=D("VPathInput");return o(_)?j("",!0):(y(),h("div",ee,[e(G,null,{default:t(()=>[e(k,{class:"px-5 mb-5",title:"常用设置"},{default:t(()=>[e(U,null,{default:t(()=>[e(b,{cols:"12",class:"pb-5 ml-3"},{default:t(()=>[f("div",te,[e(v,{modelValue:o(l).start_delay,"onUpdate:modelValue":i[0]||(i[0]=n=>o(l).start_delay=n),label:"延时启动"},null,8,["modelValue"])])]),_:1}),e(b,{cols:"12",class:"pb-5 ml-3"},{default:t(()=>[e(s,{modelValue:o(l).backup_dir,"onUpdate:modelValue":i[1]||(i[1]=n=>o(l).backup_dir=n),label:"备份文件夹"},null,8,["modelValue"])]),_:1}),e(b,{cols:"12",class:"pb-5 ml-3"},{default:t(()=>[e(v,{modelValue:o(l).http_proxy,"onUpdate:modelValue":i[2]||(i[2]=n=>o(l).http_proxy=n),label:"http代理"},null,8,["modelValue"])]),_:1}),e(b,{cols:"12",class:"pb-5 ml-3"},{default:t(()=>[e(P,{modelValue:o(l).debug_mode,"onUpdate:modelValue":i[3]||(i[3]=n=>o(l).debug_mode=n),label:"调试模式"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(k,{class:"px-5 mb-5",title:"登录设置"},{default:t(()=>[e(U,null,{default:t(()=>[e(b,{cols:"12",class:"pb-5 ml-3"},{default:t(()=>[e(v,{modelValue:o(l).username,"onUpdate:modelValue":i[4]||(i[4]=n=>o(l).username=n),label:"用户名"},null,8,["modelValue"])]),_:1})]),_:1}),e(U,null,{default:t(()=>[e(b,{cols:"12",class:"pb-5 ml-3"},{default:t(()=>[e(v,{modelValue:o(l).password,"onUpdate:modelValue":i[5]||(i[5]=n=>o(l).password=n),label:"密码",type:"password"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),f("div",se,[e(W,{onClick:c},{default:t(()=>i[6]||(i[6]=[E("保存")])),_:1})])]),_:1})]))}}}),ae={key:0},oe={class:"btn-settings"},ne=T({__name:"Notification",setup(S){const _=N.useToast(),d=m(!0),l=m({title:"通知工具",items:[{key:"bot_token",label:"Bot Token",hint:"Telegram机器人token，格式：789598:EGV-KOI56ghOkP-adx57W2v1u598ew1"},{key:"chat_id",label:"Chat ID",hint:"接受消息通知的用户、群组或频道Chat ID"},{key:"user_id",label:"用户白名单",hint:"可使用Telegram机器人的用户ID清单，多个用户用,分隔，不填写则所有用户都能使用"},{key:"admin_id",label:"管理员白名单",hint:"可使用管理菜单及命令的用户ID列表，多个ID使用,分隔"}]}),p=m({title:"推送设置",items:[{key:"symlink_observer",label:"监控状态"},{key:"observer_enabled",label:"监控事件"},{key:"cloud_wathcer",label:"转存监控"},{key:"sync_task",label:"同步完成"},{key:"backup_task",label:"备份完成"},{key:"cloud_status",label:"掉盘通知"},{key:"filetrans_enbaled",label:"刮削完成"}]}),c=m({switch:!1,bot_token:"",chat_id:"",user_id:"",admin_id:"",symlink_watcher:!1,cloud_wathcer:!1,sync_task:!1,backup_task:!1,cloud_status:!1,filetrans_task:!1});async function u(){try{const s=await V.get("/system/settings/notify_config");i(s.telegram),d.value=!1}catch(s){console.error("Error fetching sync config:",s)}}async function a(){try{let s={settings:{telegram:c.value},name:"notify_config"};const n=await V.post("/system/save_settings",s);n.success?_.success(n.message):_.error(n.message)}catch(s){console.error("Error fetching sync config:",s)}}function i(s){c.value=s}return F(u),(s,n)=>o(d)?j("",!0):(y(),h("div",ae,[e(G,null,{default:t(()=>[e(U,null,{default:t(()=>[e(b,{cols:"12"},{default:t(()=>[e(k,{title:o(l).title},{default:t(()=>[e(P,{label:"启用通知",modelValue:o(c).switch,"onUpdate:modelValue":n[0]||(n[0]=r=>o(c).switch=r),class:"ml-3"},null,8,["modelValue"]),e(U,{class:"pb-5 px-3"},{default:t(()=>[(y(!0),h(M,null,R(o(l).items,r=>(y(),q(b,{cols:"12",md:"6",class:"mb-5"},{default:t(()=>[e(v,{id:r.label,label:r.label,modelValue:o(c)[r.key],"onUpdate:modelValue":g=>o(c)[r.key]=g,hint:r.hint,"persistent-hint":""},null,8,["id","label","modelValue","onUpdate:modelValue","hint"])]),_:2},1024))),256))]),_:1})]),_:1},8,["title"])]),_:1}),e(b,{cols:"12"},{default:t(()=>[e(k,{title:o(p).title},{default:t(()=>[e(U,{class:"pb-5"},{default:t(()=>[(y(!0),h(M,null,R(o(p).items,r=>(y(),q(b,{cols:"12",sm:"4",md:"3",lg:"2",class:"ml-5"},{default:t(()=>[e(P,{label:r.label,modelValue:o(c)[r.key],"onUpdate:modelValue":g=>o(c)[r.key]=g},null,8,["label","modelValue","onUpdate:modelValue"])]),_:2},1024))),256))]),_:1})]),_:1},8,["title"])]),_:1})]),_:1}),f("div",oe,[e(W,{onClick:a},{default:t(()=>n[1]||(n[1]=[E("保存")])),_:1})])]),_:1})]))}}),ie={key:0},ue={class:"absolute top-0 right-3"},de={class:"btn-settings"},ce=T({__name:"Settings115",setup(S){const _=N.useToast(),d=m(!0),l=m([{name:"",cookies:"",status:!0}]);function p(){l.value.push({name:"",cookies:"",status:!0})}function c(s){l.value.splice(s,1)}async function u(){try{const s=await V.get("/system/settings/115_settings");i(s),d.value=!1}catch(s){console.error("Error fetching sync config:",s)}}async function a(){try{let s={settings:l.value,name:"115_settings"};const n=await V.post("/system/save_settings",s);n.success?_.success(n.message):_.error(n.message)}catch(s){console.error("Error fetching sync config:",s)}}function i(s){l.value=s}return F(u),(s,n)=>{const r=D("IconBtn");return o(d)?j("",!0):(y(),h("div",ie,[e(k,{title:"115设置",subtitle:"用于115的目录树同步,也可与cd2的115ck保持一致,程序可以自动检测ck是否失效"},{default:t(()=>[e(K,null,{default:t(()=>[e(o(z),{list:o(l),handle:".cursor-move",delay:"100","item-key":"id",tag:"div","component-data":{class:"grid gap-3 grid-directory"}},{item:t(({element:g,index:C})=>[e(k,{color:"card"},{default:t(()=>[e(O,{class:"py-3"},{default:t(()=>[f("span",ue,[e(r,{onClick:p},{default:t(()=>[e($,{icon:"mdi-plus"})]),_:1}),e(r,{onClick:w=>c(C)},{default:t(()=>[e($,{icon:"mdi-minus"})]),_:2},1032,["onClick"]),e(r,null,{default:t(()=>[e($,{class:"cursor-move",icon:"mdi-drag"})]),_:1})])]),_:2},1024),e(x,{class:"mb-5"},{default:t(()=>[e(v,{label:"名称",modelValue:g.name,"onUpdate:modelValue":w=>g.name=w,hint:"自定义该配置的名称,用于识别不同的账户,该名称不可重复","persistent-hint":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(x,{class:"my-5"},{default:t(()=>[e(v,{label:"Cookies",modelValue:g.cookies,"onUpdate:modelValue":w=>g.cookies=w,hint:"115账户的cookies,推荐抓取小程序的cookies","persistent-hint":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(x,null,{default:t(()=>[e(P,{modelValue:g.status,"onUpdate:modelValue":w=>g.status=w,label:"风控检测",hint:"判断ck对应的账号是否发生风控并自动解除验证风控","persistent-hint":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)]),_:1},8,["list"]),f("div",de,[e(W,{onClick:a},{default:t(()=>n[0]||(n[0]=[E("保存")])),_:1})])]),_:1})]),_:1})]))}}}),re={key:0},_e={class:"absolute top-0 right-3"},fe={class:"btn-settings"},me=T({__name:"CloudStatus",setup(S){const _=N.useToast(),d=m(!0),l=m([{name:"",sign_file:"",sign_file_url:""}]);function p(){l.value.push({name:"",sign_file:"",sign_file_url:""})}function c(s){l.value.splice(s,1)}async function u(){try{const s=await V.get("/system/settings/cloud_status");i(s),d.value=!1}catch(s){console.error("Error fetching sync config:",s)}}async function a(){try{let s={settings:l.value,name:"cloud_status"};const n=await V.post("/system/save_settings",s);n.success?_.success(n.message):_.error(n.message)}catch(s){console.error("Error fetching sync config:",s)}}function i(s){l.value=s}return F(u),(s,n)=>{const r=D("IconBtn"),g=D("VPathInput");return o(d)?j("",!0):(y(),h("div",re,[e(k,{title:"掉盘检测",subtitle:"通过判断指定的文件是否可以下载判断是否发生掉盘/ck失效"},{default:t(()=>[e(K,null,{default:t(()=>[e(o(z),{list:o(l),handle:".cursor-move",delay:"100","item-key":"id",tag:"div","component-data":{class:"grid gap-3 grid-directory"}},{item:t(({element:C,index:w})=>[e(k,{color:"card"},{default:t(()=>[e(O,{class:"py-3"},{default:t(()=>[f("span",_e,[e(r,{onClick:p},{default:t(()=>[e($,{icon:"mdi-plus"})]),_:1}),e(r,{onClick:I=>c(w)},{default:t(()=>[e($,{icon:"mdi-minus"})]),_:2},1032,["onClick"]),e(r,null,{default:t(()=>[e($,{class:"cursor-move",icon:"mdi-drag"})]),_:1})])]),_:2},1024),e(x,null,{default:t(()=>[e(v,{label:"名称",modelValue:C.name,"onUpdate:modelValue":I=>C.name=I,hint:"自定义该配置的名称,用于识别不同的网盘账户,该名称不可重复","persistent-hint":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(x,{class:"mb-5"},{default:t(()=>[e(g,{label:"文件路径",modelValue:C.sign_file,"onUpdate:modelValue":I=>C.sign_file=I,hint:"掉盘检测的文件路径",fileRequired:!0},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(x,{class:"mb-3"},{default:t(()=>[e(v,{label:"文件链接",modelValue:C.sign_file_url,"onUpdate:modelValue":I=>C.sign_file_url=I,hint:"掉盘检测的文件在网盘中的下载链接","persistent-hint":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)]),_:1},8,["list"]),f("div",fe,[e(W,{onClick:a},{default:t(()=>n[0]||(n[0]=[E("保存")])),_:1})])]),_:1})]),_:1})]))}}}),pe={key:0},ge={class:"btn-settings"},be=T({__name:"CloudMountWatcher",setup(S){const _=N.useToast(),d=m(!0),l=m({switch:!1,cloud_dir:""});async function p(){try{const u=await V.get("/system/settings/cloud_mount_watcher");l.value=u,d.value=!1}catch(u){console.error("Error fetching sync config:",u)}}async function c(){try{let u={settings:l.value,name:"cloud_mount_watcher"};const a=await V.post("/system/save_settings",u);a.success?_.success(a.message):_.error(a.message)}catch(u){console.error("Error fetching sync config:",u)}}return F(p),(u,a)=>{const i=D("VPathInput");return o(d)?j("",!0):(y(),h("div",pe,[e(U,null,{default:t(()=>[e(b,{cols:"12",md:"4"},{default:t(()=>[e(k,{title:"挂载监测"},{default:t(()=>[e(x,{class:"mb-5"},{default:t(()=>[e(P,{modelValue:o(l).switch,"onUpdate:modelValue":a[0]||(a[0]=s=>o(l).switch=s),label:"启用"},null,8,["modelValue"]),e(i,{label:"文件路径",modelValue:o(l).cloud_dir,"onUpdate:modelValue":a[1]||(a[1]=s=>o(l).cloud_dir=s),hint:"cd2挂载点路径"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),f("div",ge,[e(W,{onClick:c},{default:t(()=>a[2]||(a[2]=[E("保存")])),_:1})])]))}}}),ye=T({__name:"settings",setup(S){const _=A(),d=m(_.query.tab),l=[{tab:"global_settings",icon:"mdi-cog",title:"全局设置"},{tab:"notification",icon:"mdi-bell",title:"通知"},{tab:"115_settings",icon:"mdi-cookie",title:"115设置"},{tab:"cloud_status",icon:"mdi-eye",title:"掉盘检测"},{tab:"cloud_mount_watcher",icon:"mdi-eye",title:"挂载监测"}];function p(c){Q.push("/settings?tab="+c)}return(c,u)=>(y(),h("div",null,[e(Y,{modelValue:d.value,"onUpdate:modelValue":u[0]||(u[0]=a=>d.value=a),"show-arrows":"",class:"v-tabs-pill"},{default:t(()=>[(y(),h(M,null,R(l,a=>e(H,{key:a.icon,value:a.tab,"selected-class":"v-slide-group-item--active v-tab--selected",onClick:i=>p(a.tab)},{default:t(()=>[f("div",null,[e($,{size:"20",start:"",icon:a.icon},null,8,["icon"]),E(" "+J(a.title),1)])]),_:2},1032,["value","onClick"])),64))]),_:1},8,["modelValue"]),e(Z,{modelValue:d.value,"onUpdate:modelValue":u[1]||(u[1]=a=>d.value=a),class:"mt-5 disable-tab-transition",touch:!1},{default:t(()=>[e(B,{value:"global_settings"},{default:t(()=>[e(L,{name:"fade-slide",appear:""},{default:t(()=>[f("div",null,[e(le)])]),_:1})]),_:1}),e(B,{value:"notification"},{default:t(()=>[e(L,{name:"fade-slide",appear:""},{default:t(()=>[f("div",null,[e(ne)])]),_:1})]),_:1}),e(B,{value:"115_settings"},{default:t(()=>[e(L,{name:"fade-slide",appear:""},{default:t(()=>[f("div",null,[e(ce)])]),_:1})]),_:1}),e(B,{value:"cloud_status"},{default:t(()=>[e(L,{name:"fade-slide",appear:""},{default:t(()=>[f("div",null,[e(me)])]),_:1})]),_:1}),e(B,{value:"cloud_mount_watcher"},{default:t(()=>[e(L,{name:"fade-slide",appear:""},{default:t(()=>[f("div",null,[e(be)])]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}}),he=X(ye,[["__scopeId","data-v-6eefe078"]]);export{he as default};
