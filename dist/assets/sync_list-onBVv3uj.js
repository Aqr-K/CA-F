import{a as T,S as $,r as u,v as M,b as m,o as l,c as k,w as t,e as R,K as r,i as s,L as U,T as j,g as d,t as _,U as g,W as F,X as N,B as h,h as b,j as v,M as D,F as x,Y as K,Z as V,$ as P,_ as W}from"./index-DI_hYhUU.js";import{d as X}from"./vuedraggable.umd-CKWiebqN.js";const Y={class:"absolute top-4 right-1"},Z=["title"],q=T({__name:"sync_list",setup(z){const y=$.useToast();u(!0);const i=u([]),C=[{label:"媒体目录：",key:"media_dir"},{label:"本地目录：",key:"symlink_dir"}],w=u([{label:"实时监控",key:"observer_enabled"},{label:"定时同步",key:"sync_scheduled"},{label:"定时备份",key:"backup_scheduled"}]);async function B(){await r.post("/system/save_settings",{name:"sync_list",settings:i.value})}async function I(){try{const o=await r.get("/autosymlink/sync_list");i.value=o}catch(o){console.error("Error fetching sync list:",o)}}async function L(o){try{const e=await r.post("/autosymlink/save_config",o)}catch(e){console.error("Error fetching sync config:",e)}}async function E(o){try{const e=await r.post("/autosymlink/start_task",o);e.success?y.success(e.message):y.error(e.message)}catch(e){console.error("Error fetching sync config:",e)}}return M(I),(o,e)=>{const S=m("RouterLink"),p=m("IconBtn");return l(),k(R(X),{list:i.value,handle:".cursor-move",delay:"100",onEnd:B,"item-key":"id",tag:"v-row"},{item:t(({element:n})=>[s(V,{cols:"12",md:"4",class:"my-5"},{default:t(()=>[s(U,{class:"py-5"},{default:t(()=>[s(j,{class:"pt-3 mb-3 justify-start task-name"},{default:t(()=>[s(S,{class:"text-[36px] text-[#2f94c3]",to:{name:"sync_config",params:{id:n.id}}},{default:t(()=>[d("span",null,_(n.task_name),1)]),_:2},1032,["to"]),d("span",Y,[s(g,{text:"同步"},{activator:t(({props:a})=>[s(p,F(a,{onClick:N(c=>E(n),["stop"])}),{default:t(()=>[s(h,{icon:"mdi-cloud-sync-outline"})]),_:2},1040,["onClick"])]),_:2},1024),s(g,{text:"排序"},{activator:t(({props:a})=>[s(p,null,{default:t(()=>[s(h,{class:"cursor-move",icon:"mdi-drag"})]),_:1})]),_:1})])]),_:2},1024),(l(),b(x,null,v(C,(a,c)=>s(D,{key:c,class:"text-left ml-1 truncate"},{default:t(()=>[d("span",{class:"text-[14px] font-bold",title:n[a.key]},_(a.label)+_(n[a.key]),9,Z)]),_:2},1024)),64)),s(K,{class:"ml-2"},{default:t(()=>[(l(!0),b(x,null,v(w.value,(a,c)=>(l(),k(V,{key:c,cols:"12",md:"6"},{default:t(()=>[s(P,{label:a.label,modelValue:n[a.key],"onUpdate:modelValue":f=>n[a.key]=f,onInput:f=>L(n)},null,8,["label","modelValue","onUpdate:modelValue","onInput"])]),_:2},1024))),128))]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:1},8,["list"])}}}),H=W(q,[["__scopeId","data-v-9d7a5baf"]]);export{H as default};
