import{d as R,r as k,a as $,u as L,b as E,o as d,c as S,w as l,e as r,V as G,f as M,g as f,h as v,i as t,j as A,n as D,t as C,F as x,k as H,l as N,m as O,_ as W,p as j,q as z,s as F,v as K,x as U,y as Y,z as q,A as J,B as Q,C as T,D as y,E as X,G as Z,H as ee,I as te,J as oe,R as se,K as I}from"./index-BcogOgP3.js";import{c as B}from"./index-sZoAhobJ.js";const le="/assets/dark-olsPyBhK.png",ae="/assets/light2-buGLGn5A.png",P=R("drawer",()=>{const m=k(!1);function a(){m.value=!m.value}function i(){m.value=!0}function s(){m.value=!1}return{isOpen:m,toggleDrawer:a,openDrawer:i,closeDrawer:s}}),ne={id:"logo",class:"my-10 flex justify-center"},re={key:0,src:le,alt:"Logo",style:{"max-width":"75%"}},ie={key:1,src:ae,alt:"Logo",style:{"max-width":"75%"}},ce={class:"mb-2 flex items-center"},ue={class:"mx-3 text-gray-500"},de={class:"text-[16px] font-[450]"},me=$({__name:"SideBar",setup(m){const{mdAndDown:a}=L(),i=P();a.value?i.closeDrawer():i.openDrawer();const s=k(!1),p=M(),h=[{title:"发现",items:[{title:"主界面",to:"/dashboard",icon:"mdi-home",isActive:!0},{title:"查看日志",to:"/logs",icon:"mdi-format-list-bulleted",isActive:!1}]},{title:"软链接 | Strm",items:[{title:"目录配置",to:"/sync_list",icon:"mdi-folder",isActive:!1},{title:"手动同步",to:"/sync_task",icon:"mdi-cloud-sync-outline",isActive:!1},{title:"添加同步",to:"/add_sync",icon:"mdi-plus",isActive:!1}]},{title:"刮削同步",items:[{title:"目录配置",to:"/file_transfer",icon:"mdi-folder",isActive:!1},{title:"文件管理",to:"/file_manager",icon:"mdi-folder-multiple-outline",isActive:!1}]},{title:"系统",items:[{title:"插件",to:"/plugins",icon:"mdi-dots-grid",isActive:!1},{title:"设置",to:"/settings",icon:"mdi-cog",isActive:!1}]}],_=k(null),w=n=>{const c=_.value.$el,g=c.scrollTop,u=c.scrollHeight,o=c.offsetHeight;(g===0&&n.deltaY<0||g+o>=u&&n.deltaY>0)&&n.preventDefault()};function b(n){s.value=!0,O.push(n)}return(n,c)=>{const g=E("PerfectScrollbar");return d(),S(G,{modelValue:r(i).isOpen,"onUpdate:modelValue":c[0]||(c[0]=u=>r(i).isOpen=u),app:"",class:"side-bar",onWheel:w,color:"background"},{prepend:l(()=>[f("div",ne,[n.$vuetify.theme.current.dark?(d(),v("img",re)):(d(),v("img",ie))])]),default:l(()=>[t(g,{ref_key:"scrollbar",ref:_},{default:l(()=>[(d(),v(x,null,A(h,(u,o)=>f("div",{key:o,class:"mr-5"},[f("div",ce,[f("hr",{class:"flex-1 opacity-35 divider",style:D({"border-color":n.$vuetify.theme.current.colors.divider})},null,4),f("span",ue,C(u.title),1),f("hr",{class:"flex-1 opacity-35 divider",style:D({"border-color":n.$vuetify.theme.current.colors.divider})},null,4)]),(d(!0),v(x,null,A(u.items,(e,V)=>(d(),S(H,{class:"h-[30px] text-[16px] my-5 pl-5 nav-link",active:r(p).path===e.to||r(p).path.startsWith("/sync_config")&&e.to.startsWith("/sync_list"),key:V,"prepend-icon":e.icon,to:e.to,link:"",onTouchend:pe=>b(e.to)},{default:l(()=>[t(N,{class:"w-min"},{default:l(()=>[f("span",de,C(e.title),1)]),_:2},1024)]),_:2},1032,["active","prepend-icon","to","onTouchend"]))),128))])),64))]),_:1},512)]),_:1},8,["modelValue"])}}}),fe=W(me,[["__scopeId","data-v-9eedf301"]]),ve=$({__name:"default",setup(m){const a=k(!1),{mdAndDown:i}=L(),{global:s}=j(),p=P(),h=z(()=>s.current.value.dark?"white":"gray"),_=F();i.value?p.closeDrawer():p.openDrawer();function w(){p.toggleDrawer()}async function b(){try{let o={settings:s.name.value,name:"theme"};await I.post("/system/save_settings",o)}catch(o){console.error("Error fetching  saveConfig:",o)}}function n(){_.logout(),O.push("/login")}async function c(){const o=B()?"dark":"light";o!=s.name.value&&(a.value=!0,setTimeout(()=>{a.value=!1},180)),s.name.value=o,localStorage.setItem("theme","auto"),localStorage.setItem("materio-initial-loader-bg",s.current.value.colors.background);let e={settings:"auto",name:"theme"};await I.post("/system/save_settings",e)}function g(){s.name.value=s.current.value.dark?"light":"dark",a.value=!0,setTimeout(()=>{a.value=!1},180),localStorage.setItem("theme",s.name.value),localStorage.setItem("materio-initial-loader-bg",s.current.value.colors.background),b()}function u(){let o=localStorage.getItem("theme")||"light";const e=B()?"dark":"light";s.name.value=o==="auto"?e:o}return K(()=>{u()}),(o,e)=>(d(),v(x,null,[t(fe),t(Y,{class:"theme",modelValue:r(a),"onUpdate:modelValue":e[0]||(e[0]=V=>U(a)?a.value=V:null),"scroll-strategy":"reposition"},null,8,["modelValue"]),t(q,{style:D({background:o.$vuetify.theme.current.colors.background,boxShadow:"none",border:"none"}),app:""},{default:l(()=>[r(i)?(d(),S(y,{key:0,icon:"",onClick:w},{default:l(()=>[t(Q,null,{default:l(()=>e[1]||(e[1]=[T("mdi-menu")])),_:1})]),_:1})):X("",!0),t(Z),t(y,{class:"theme-btn mr-2",icon:"mdi-laptop",onClick:c,color:r(h)},null,8,["color"]),t(y,{class:"theme-btn mr-2",icon:o.$vuetify.theme.current.dark?"mdi-weather-night":"mdi-weather-sunny",onClick:g,color:r(h)},null,8,["icon","color"]),t(y,{id:"settings",icon:"mdi-cog-outline",color:r(h)},null,8,["color"]),t(ee,{activator:"#settings"},{default:l(()=>[t(te,null,{default:l(()=>[t(H,{onClick:n},{default:l(()=>[t(N,null,{default:l(()=>e[2]||(e[2]=[T("退出登录")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["style"]),t(J,null,{default:l(()=>[t(oe,{fluid:""},{default:l(()=>[t(r(se))]),_:1})]),_:1})],64))}});export{ve as default};
